<extend name="./Application/Admin/View/Common/base.html"/>
<block name="styles">
    <style>
        .sign-sum-title {
            border-left: 5px solid #999999;
            color: #999999;
            font-size: 14px;
            height: 18px;
            line-height: 18px;
            padding-left: 5px;
        }

        .sign-sum {
            color: #5eb95e;
            font-size: 25px;
            font-weight: bold;
        }

        .unit {
            color: #999999;
            font-size: 14px;
            height: 18px;
            line-height: 18px;
        }

        .am-form-field{
            height: 33px !important;
        }

        .am-datepicker-date .am-btn{
            height: 33px;
        }
    </style>
</block>
<block name="content">
    <div class="admin-content-body">
        <div class="am-cf am-padding am-padding-bottom-0">
            <div class="am-fl am-cf"><strong class="am-text-primary am-text-lg">学习笔记</strong></div>
        </div>
        <hr>

        <!--<div class="am-g">-->
            <!--&lt;!&ndash;<div class="am-u-sm-12 am-u-md-2">&ndash;&gt;-->
                <!--&lt;!&ndash;<div class="am-btn-toolbar">&ndash;&gt;-->
                    <!--&lt;!&ndash;<div class="am-btn-group am-btn-group-xs">&ndash;&gt;-->
                        <!--&lt;!&ndash;<div style="line-height: 33px; padding-left: 5px">&ndash;&gt;-->
                            <!--&lt;!&ndash;<span class="sign-sum-title">微心得总量：</span>&ndash;&gt;-->
                            <!--&lt;!&ndash;<span class="sign-sum">{$count}</span>&ndash;&gt;-->
                        <!--&lt;!&ndash;</div>&ndash;&gt;-->
                    <!--&lt;!&ndash;</div>&ndash;&gt;-->
                <!--&lt;!&ndash;</div>&ndash;&gt;-->
            <!--&lt;!&ndash;</div>&ndash;&gt;-->
            <!--<form class="am-u-sm-12 am-u-md-12" id="search-form">-->
                <!--<div class="am-input-group am-input-group-sm" style="width: 200px; float: right; margin-left: 15px">-->
                    <!--<input type="text" class="am-form-field" name="keyword" value="{$search.keyword}" placeholder="请输入支部名称">-->
                        <!--<span class="am-input-group-btn">-->
                            <!--<button class="am-btn am-btn-default" type="submit">搜索</button>-->
                        <!--</span>-->
                <!--</div>-->
                <!--<div style="width: 200px;float: right;" class="am-input-group am-datepicker-date">-->
                    <!--<input type="text" name="end_date" class="am-form-field" placeholder="结束日期" readonly value="{$search['end_date']}">-->
					    <!--<span class="am-input-group-btn am-datepicker-add-on">-->
					        <!--<button class="am-btn am-btn-default" type="button" id="my-end">-->
                                <!--<span class="am-icon-calendar"></span>-->
                            <!--</button>-->
					  	    <!--<button class="am-btn am-btn-default btn-cancel-date" type="button" style="padding: 5px 10px;">-->
                                <!--<span class="am-icon-remove"></span>-->
                            <!--</button>-->
					    <!--</span>-->
                <!--</div>-->

                <!--<span style="float: right; margin: 0 5px; line-height: 33px;"> 至 </span>-->

                <!--<div style="width: 200px;float: right;" class="am-input-group am-datepicker-date">-->
                    <!--<input readonly type="text" name="start_date" class="am-form-field" placeholder="开始日期" value="{$search['start_date']}">-->
					    <!--<span class="am-input-group-btn am-datepicker-add-on">-->
					        <!--<button class="am-btn am-btn-default" type="button" style="padding: 5px 10px;" id="my-start">-->
                                <!--<span class="am-icon-calendar"></span></button>-->
					        <!--<button class="am-btn am-btn-default btn-cancel-date" type="button" style="padding: 5px 10px;">-->
                                <!--<span class="am-icon-remove"></span></button>-->
					    <!--</span>-->
                <!--</div>-->
            <!--</form>-->
        <!--</div>-->

        <div lass="am-u-sm-12 am-u-md-12 " style="margin-top: 10px; margin-bottom: 10px">
            <section class="am-panel am-panel-success " style="margin: 0 2%;border-radius: 5px">
                <header class="am-panel-hd" style="height: 50px; padding: 8px 0px;">
                    <h3 class="am-panel-title am-u-md-3" style="line-height: 37px">笔记及学时统计</h3>

                    <form class="am-u-sm-12 am-u-md-9" id="search-form">
                        <div class="am-input-group am-input-group-sm" style="width: 200px; float: right; margin-left: 15px">
                            <input type="text" class="am-form-field" name="keyword" value="{$search.keyword}" placeholder="请输入支部名称">
                        <span class="am-input-group-btn">
                            <button class="am-btn am-btn-default" type="submit">搜索</button>
                        </span>
                        </div>
                        <div style="width: 200px;float: right;" class="am-input-group am-datepicker-date">
                            <input type="text" name="end_date" class="am-form-field" placeholder="结束日期" readonly value="{$search['end_date']}">
					    <span class="am-input-group-btn am-datepicker-add-on">
					        <button class="am-btn am-btn-default" type="button" id="my-end">
                                <span class="am-icon-calendar"></span>
                            </button>
					  	    <button class="am-btn am-btn-default btn-cancel-date" type="button" style="padding: 5px 10px;">
                                <span class="am-icon-remove"></span>
                            </button>
					    </span>
                        </div>

                        <span style="float: right; margin: 0 5px; line-height: 33px;"> 至 </span>

                        <div style="width: 200px;float: right;" class="am-input-group am-datepicker-date">
                            <input readonly type="text" name="start_date" class="am-form-field" placeholder="开始日期" value="{$search['start_date']}">
					    <span class="am-input-group-btn am-datepicker-add-on">
					        <button class="am-btn am-btn-default" type="button" style="padding: 5px 10px;" id="my-start">
                                <span class="am-icon-calendar"></span></button>
					        <button class="am-btn am-btn-default btn-cancel-date" type="button" style="padding: 5px 10px;">
                                <span class="am-icon-remove"></span></button>
					    </span>
                        </div>
                    </form>
                </header>
                <div class="am-panel-bd">
                    <div class="am-g">
                        <div class="am-u-sm-4"><span>笔记总量：{$note_count} 份</span></div>
                        <div class="am-u-sm-4"><span>自学笔记：{$note1_count} 份</span></div>
                        <div class="am-u-sm-4"><span>集中学习笔记：{$note2_count} 份</span></div>
                        <div class="am-u-sm-4"><span>学时总长：{$time_sum} 小时</span></div>
                        <div class="am-u-sm-4"><span>自学学时：{$time1_sum} 小时</span></div>
                        <div class="am-u-sm-4"><span>集中学习学时：{$time2_sum} 小时</span></div>
                    </div>
                </div>
            </section>
        </div>

        <div class="am-g">
            <div class="am-u-sm-12">
                <form class="am-form">
                    <table class="am-table am-table-striped am-table-hover table-main">
                        <thead>
                        <tr>
                            <!-- <th class="table-check"><input type="checkbox" /></th> -->
                            <th class="table-title">ID</th>
                            <th class="table-title">支部名称</th>
                            <th class="table-author am-hide-sm-only">支部成员</th>
                            <th class="am-hide-sm-only">笔记数量</th>
                            <th class="am-hide-sm-only">学时总和</th>
                            <th class="am-hide-sm-only">操作</th>
                        </tr>
                        </thead>
                        <tbody>
                        <volist name="page.list" id="vo">
                            <tr>
                                <td>{$vo.id}</td>
                                <td><a href="#">{$vo.name}</a></td>
                                <td>{$vo.member_count}</td>
                                <td>{$vo.note_count}</td>
                                <td>{$vo.time_sum}</td>
                                <td>
                                    <div class="am-btn-toolbar">
                                        <div class="am-btn-group am-btn-group-xs">
                                            <button class="am-btn am-btn-default am-btn-xs am-text-secondary"
                                                    onclick="loading_page('__ROOT__/Admin/Note/branch_note?branch_id={$vo.id}');"
                                                    type="button"><span class="am-icon-pencil-square-o"></span> 详情
                                            </button>
                                            <!--<a class="am-btn am-btn-default am-btn-xs am-text-danger am-hide-sm-only btn-dec" type="button" data-id="{$vo.id}"><span class="am-icon-trash-o"></span> 删除</a>-->
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </volist>
                        </tbody>
                    </table>
                    <div class="page">
                        {$page.show}
                    </div>
                    <!--<hr />-->
                </form>
            </div>
        </div>
    </div>
</block>

<block name="scripts">
    <script>
        $('#my-start').datepicker().
        on('changeDate.datepicker.amui', function(event) {
            $(this).parent().prev().val($('#my-start').data('date'));
            $(this).datepicker('close');
        });
        $('#my-end').datepicker().
        on('changeDate.datepicker.amui', function(event) {
            $(this).parent().prev().val($('#my-end').data('date'));
            $(this).datepicker('close');
        });
        $('.btn-cancel-date').click(function(){
            $(this).parent().prev().val('');

            return false
        })

        Date.prototype.Format = function (fmt) { //author: meizz
            var o = {
                "M+": this.getMonth() + 1, //月份
                "d+": this.getDate(), //日
                "h+": this.getHours(), //小时
                "m+": this.getMinutes(), //分
                "s+": this.getSeconds(), //秒
                "q+": Math.floor((this.getMonth() + 3) / 3), //季度
                "S": this.getMilliseconds() //毫秒
            };
            if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
            for (var k in o)
                if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
            return fmt;
        }
    </script>
</block>
